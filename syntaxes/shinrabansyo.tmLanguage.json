{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Shinrabansyo Language",
  "scopeName": "source.shinrabansyo",
  "patterns": [
    {
      "include": "#keywords-original"
    },
    {
      "include": "#keywords-overwrite"
    },
    {
      "include": "#inline-assembly"
    },
    {
      "include": "source.rust"
    }
  ],
  "repository": {
    "keywords-original": {
      "patterns": [
        {
          "name": "keyword.declaration.shinrabansyo",
          "match": "\\bvar\\b"
        }
      ]
    },
    "keywords-overwrite": {
      "patterns": [
        {
          "name": "keyword.other.rust",
          "match": "\\bsizeof\\b"
        },
        {
          "name": "variable.other.rust",
          "match": "\\b(async|await|break|const|continue|crate|enum|extern|impl|in|let|loop|match|mod|move|mut|pub|ref|Self|self|static|super|trait|type|unsafe|use|where)\\b"
        }
      ]
    },
    "inline-assembly": {
      "patterns": [
        {
          "begin": "\\b(asm)\\s*\\{",
          "beginCaptures": {
            "1": { "name": "keyword.control.shinrabansyo" },
            "2": { "name": "keyword.other.assembly.shinrabansyo" }
          },
          "end": "\\}",
          "endCaptures": {
            "0": { "name": "keyword.other.assembly.shinrabansyo" }
          },
          "name": "meta.inline.assembly.shinrabansyo",
          "patterns": [
            {
              "name": "comment.line.assenbly.shinrabansyo",
              "match": "//.*$"
            },
            {
              "name": "keyword.instruction.assembly.shinrabansyo",
              "match": "(?i)\\b(?:nop|add|sub|addi|subi|beq|bne|blt|ble|jal|lw|lh|lb|lhu|lbu|ilb|sw|sh|sb|isb|in|out|and|or|xor|srl|sra|sll|andi|ori|xori|srli|srai|slli)\\b"
            },
            {
              "name": "variable.other.assembly.yourlang",
              "match": "\\b(?!R\\d+\\b)[A-Za-z_]\\w*\\b"
            },
            {
              "name": "constant.other.register.assembly.shinrabansyo",
              "match": "\\bR\\d+\\b"
            },
            {
              "name": "constant.numeric.assembly.shinrabansyo",
              "match": "\\b\\d+\\b"
            },
            {
              "name": "punctuation.separator.assembly.shinrabansyo",
              "match": "->|=|,|\\(|\\)"
            }
          ]
        }
      ]
    }
  }
}
